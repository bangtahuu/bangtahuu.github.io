<!doctype html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="description" content="LandingPage Demo">
    <title>LandingPage Demo</title>
    <!-- Global site tag (gtag.js) - Google Analytics -->
    <script async src="https://www.googletagmanager.com/gtag/js?id=UA-149375680-1"></script>
    <script>
      window.dataLayer = window.dataLayer || [];
      function gtag(){dataLayer.push(arguments);}
      gtag('js', new Date());

      gtag('config', 'UA-149375680-1');
    </script>
</head>

<body>

<!--<script>-->
<!--    window.fbAsyncInit = function() {-->
<!--        FB.init({-->
<!--            appId      : '{your-app-id}',-->
<!--            cookie     : true,-->
<!--            xfbml      : true,-->
<!--            version    : '{api-version}'-->
<!--        });-->

<!--        FB.AppEvents.logPageView();-->

<!--    };-->

<!--    (function(d, s, id){-->
<!--        var js, fjs = d.getElementsByTagName(s)[0];-->
<!--        if (d.getElementById(id)) {return;}-->
<!--        js = d.createElement(s); js.id = id;-->
<!--        js.src = "https://connect.facebook.net/en_US/sdk.js";-->
<!--        fjs.parentNode.insertBefore(js, fjs);-->
<!--    }(document, 'script', 'facebook-jssdk'));-->
<!--</script>-->

   
<link rel="stylesheet" href="https://unpkg.com/purecss@1.0.0/build/pure-min.css">
<link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/font-awesome/4.4.0/css/font-awesome.min.css">

<style>
    body {
        margin: 2em;
    }

    aside {
        background: #1f8dd6;
        padding: 0.3em 1em;
        border-radius: 3px;
        color: #fff;
        margin-bottom: 2em;
    }

    textarea {
        width: 100%;
    }

    .content-head {
        font-weight: 400;
        text-transform: uppercase;
        letter-spacing: 0.1em;
        margin: 2em 0 1em;
    }

    .is-center {
        text-align: center;
    }

    .button-success {
        color: white;
        border-radius: 4px;
        text-shadow: 0 1px 1px rgba(0, 0, 0, 0.2);
        background: rgb(28, 184, 65); /* this is a green */
    }

    .button-xlarge {
        font-size: 125%;
    }

    button {
        float: right;
    }

    #Name, #Company, #Company_Address, #Phone {
        width: 40%;
    }

    .honeypot-field {
        display: none;
    }

</style>

<script type="text/javascript" language="javascript">
    async function myGetData() {
        var xhttp = new XMLHttpRequest();
        xhttp.onreadystatechange = function () {
            if (this.readyState == 4 && this.status == 200) {
                var data = JSON.parse(this.response);
                document.getElementById("Name").value = data.Name;
                document.getElementById("Company").value = data.Company;
                document.getElementById("Phone").value = data.Phone;
                document.getElementById("Product").value = data.Product;
                document.getElementById("Company_Address").value = data.Company_Address;
                document.getElementById("RangeIncome").value = data.RangeIncome;
                document.getElementById("isICMCenter").value = data.isICMCenter;
                document.getElementById("thankyou_message").hidden = true;
                document.getElementById("contactme").hidden = false;
            }
        };
        xhttp.open("GET", "https://script.google.com/macros/s/AKfycby8ipKTf0JBOczX8oQswYfuhBVEPyHbLv4ta3eHl_OpV9O8_SIc/exec", true);
        xhttp.send();
    }
</script>
    
<div>
    test
    <a href="index_draft_v1.html">GOGO</a>
<div/>
 
<div class="pure-form pure-form-stacked">
    <div class="form-elements" style="border: #1BBC9B; border-style: solid; padding-left: 20px">
        <fieldset class="pure-group">
            <label for="icm">Your Phone Number: </label><br/>
            <input id="icm" name="icm" placeholder="Input here ..."/>
            <br/>
            <button class="button-success pure-button button-xlarge" onclick="myGetData()" style="float: left">
                <i class="fa fa-paper-plane"></i>&nbsp;Get ICM Info
            </button>
        </fieldset>
    </div>
</div>
<br/>
<br/>
<br/>
<div class="gform pure-form pure-form-stacked" method="POST" data-email="bang.th@mobivi.vn">
    <div class="thankyou_message" id="thankyou_message">
        <h2><em>Thanks</em> for your submited!
            We will get back to you soon!</h2>
    </div>
    <div class="contactme" id="contactme">
        <h2><em>ICare Member Info</em></h2>
    </div>

    <div class="form-elements">
        <fieldset class="pure-group">
            <label for="Name">Name: </label>
            <input id="Name" name="Name" placeholder="What your name?"/>
        </fieldset>
        <fieldset class="pure-group">
            <label for="Phone">Phone: </label>
            <input id="Phone" name="Phone" placeholder="What your number?"/>
        </fieldset>
        <fieldset class="pure-group">
            <label for="Company">Company: </label>
            <input id="Company" name="Company" placeholder="What your company name?"/>
        </fieldset>
        <fieldset class="pure-group">
            <label for="Company_Address">Company Address: </label>
            <input id="Company_Address" name="Company_Address" placeholder="What your company address?"/>
        </fieldset>
        <fieldset class="pure-group">
            <label for="isICMCenter">ICare Center: </label>
            <input list="yn" name="isICMCenter" id="isICMCenter">
            <datalist id="yn">
                <option value="Yes">
                <option value="No">
            </datalist>
        </fieldset>
        <fieldset class="pure-group">
            <label for="RangeIncome">Monthly Income Range: </label>
            <input id="RangeIncome" name="RangeIncome" placeholder="20.000.000 VND"/>
        </fieldset>
        <fieldset class="pure-group">
            <label for="Product">Product Selected: </label>
            <input list="productlist" name="Product" id="Product">
            <datalist id="productlist">
                <option value="Product 1">
                <option value="Product 2">
                <option value="Product 3">
                <option value="Product 4">
                <option value="Product 5">
            </datalist>
        </fieldset>
        <br/>
        <button class="button-success pure-button button-xlarge" id="sendbtn" onclick="handleFormSubmit()"
                style="float: left">
            <i class="fa fa-paper-plane"></i>&nbsp;Send
        </button>

        <br/>
        <br/>
        <br/>
        <br/>
    </div>

</div>

<script data-cfasync="false" type="text/javascript">
    async function actionSubmit(Name, Company, Phone, Product, Company_Address, RangeIncome, isICMCenter) {
        var url = "https://script.google.com/macros/s/AKfycby8ipKTf0JBOczX8oQswYfuhBVEPyHbLv4ta3eHl_OpV9O8_SIc/exec";
        var xhr = new XMLHttpRequest();
        xhr.open('POST', url);
        xhr.setRequestHeader("Content-Type", "application/x-www-form-urlencoded");
        // xhr.onreadystatechange = function () {
        //     if (xhr.readyState === 4 && xhr.status === 200) {
        //         document.getElementById("sendbtn").removeAttribute("disabled");
        //         document.getElementById("thankyou_message").hidden = false;
        //         document.getElementById("contactme").hidden = true;
        //     }
        // };
        var encoded = "Name=" + Name + "&Phone=" + Phone + "&Company=" + Company + "&Company_Address=" + Company_Address + "&isICMCenter=" + isICMCenter + "&RangeIncome=" + RangeIncome + "&Product=" + Product;
        xhr.send(encoded);
        document.getElementById("sendbtn").removeAttribute("disabled");
        document.getElementById("thankyou_message").hidden = false;
        document.getElementById("contactme").hidden = true;
    }

    async function handleFormSubmit() {
        let sleep = (milliseconds) => {
            return new Promise(resolve => setTimeout(resolve, milliseconds))
        }
        var rand = 500;
        var Name = document.getElementById("Name").value;
        var Company = document.getElementById("Company").value;
        var Phone = document.getElementById("Phone").value;
        var Product = document.getElementById("Product").value;
        var Company_Address = document.getElementById("Company_Address").value;
        var RangeIncome = document.getElementById("RangeIncome").value;
        var isICMCenter = document.getElementById("isICMCenter").value;
        await document.getElementById("sendbtn").setAttribute("disabled", "disabled");

        rand = Math.floor((Math.random() * 1500) + 500);
        await sleep(rand).then(() => {
            console.log(rand);
        })
        await actionSubmit(Name, Company, Phone, Product, Company_Address, RangeIncome, isICMCenter);

    }

    function loaded() {
        document.getElementById("thankyou_message").hidden = true;
        document.getElementById("contactme").hidden = false;
    };
    document.addEventListener("DOMContentLoaded", loaded, false);
</script>
</body>
</html>
